# Use DecapBridge PKCE auth (required)
backend:
  name: git-gateway
  repo: MrFreePress/arp-website
  branch: main
  auth_type: pkce
  base_url: https://auth.decapbridge.com
  auth_endpoint: /sites/352b82ab-a6a2-4381-abd8-ddac4f878d30/pkce
  auth_token_endpoint: /sites/352b82ab-a6a2-4381-abd8-ddac4f878d30/token
  gateway_url: https://gateway.decapbridge.com

  # See who did what (optional)
  commit_messages:
    create: Create {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    update: Update {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    delete: Delete {{collection}} "{{slug}}" - {{author-name}} <{{author-login}}> via DecapBridge
    uploadMedia: Upload "{{path}}" - {{author-name}} <{{author-login}}> via DecapBridge
    deleteMedia: Delete "{{path}}" - {{author-name}} <{{author-login}}> via DecapBridge
    openAuthoring: Message {{message}} - {{author-name}} <{{author-login}}> via DecapBridge

# Enable PKCE fields (optional, recommended)
auth:
  email_claim: email
  first_name_claim: first_name
  last_name_claim: last_name
  avatar_url_claim: avatar_url

# Better Decap + Bridge logo (optional)
logo_url: https://decapbridge.com/decapcms-with-bridge.svg

# Add site links in Decap CMS (optional)
site_url: https://arp-website1.netlify.app

# Enable editorial workflow (Draft → In Review → Ready)
publish_mode: editorial_workflow

# Media files configuration
media_folder: "public/uploads"
public_folder: "/uploads"

# Collections configuration
collections:
  # ============================================
  # PODCAST EPISODES
  # ============================================
  - name: "podcast"
    label: "Podcast Episodes"
    label_singular: "Podcast Episode"
    folder: "content/podcast"
    create: true
    slug: "episode-{{episode}}-{{slug}}"
    preview_path: "podcast/{{slug}}"
    summary: "Episode {{episode}}: {{title}} - {{guest}}"
    sortable_fields: ['episode', 'date', 'title']
    fields:
      - {label: "Episode Number", name: "episode", widget: "number", value_type: "int", min: 1, hint: "Sequential episode number"}
      - {label: "Title", name: "title", widget: "string", hint: "Episode title (e.g., 'Understanding Autism Spectrum Disorder')"}
      - {label: "Slug", name: "slug", widget: "string", hint: "URL-friendly version (auto-generated from title)", pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', "Must be lowercase with hyphens only"]}
      
      # Guest Information
      - {label: "Guest Name", name: "guest", widget: "string", hint: "Full name of the guest"}
      - {label: "Guest Bio", name: "guestBio", widget: "text", hint: "Short biography of the guest (2-3 sentences)"}
      - {label: "Guest Website", name: "guestWebsite", widget: "string", required: false, hint: "Guest's website URL (optional)"}
      - {label: "Guest Photo", name: "guestPhoto", widget: "image", required: false, media_folder: "/public/uploads/podcast/guests", public_folder: "/uploads/podcast/guests", hint: "Photo of the guest (optional)"}
      
      # Episode Details
      - {label: "Topic/Category", name: "topic", widget: "select", options: ["Autism Awareness", "Education", "Social Development", "Communication", "Daily Living", "Employment", "Health & Wellness", "Parenting", "Personal Stories", "Advocacy"]}
      - {label: "Publish Date", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false, hint: "When this episode will be published"}
      - {label: "Duration", name: "duration", widget: "string", pattern: ['^[0-9]{1,2}:[0-9]{2}$', "Must be in format MM:SS or HH:MM:SS"], hint: "Episode length (e.g., 45:30)"}
      - {label: "Short Description", name: "description", widget: "text", hint: "Brief description for episode list (150-200 characters)"}
      
      # Audio File
      - {label: "Audio File", name: "audioUrl", widget: "file", media_folder: "/public/uploads/podcast/audio", public_folder: "/uploads/podcast/audio", allow_multiple: false, hint: "Upload MP3 audio file"}
      
      # Show Notes
      - {label: "Show Notes", name: "showNotes", widget: "markdown", hint: "Detailed show notes with timestamps, topics discussed, etc."}
      
      # Resources
      - label: "Resources Mentioned"
        name: "resources"
        widget: "list"
        summary: '{{fields.title}}'
        hint: "Links and resources mentioned in the episode"
        fields:
          - {label: "Resource Title", name: "title", widget: "string"}
          - {label: "Resource URL", name: "url", widget: "string"}
          - {label: "Description", name: "description", widget: "text", required: false}
      
      # Metadata
      - {label: "Featured Episode", name: "featured", widget: "boolean", default: false, hint: "Show on homepage"}
      - {label: "Season", name: "season", widget: "number", required: false, value_type: "int", min: 1, hint: "Season number (optional)"}
      - {label: "Transcript Available", name: "hasTranscript", widget: "boolean", default: false}
      - {label: "Transcript", name: "transcript", widget: "markdown", required: false, hint: "Full episode transcript (optional)"}

  # ============================================
  # BLOG POSTS
  # ============================================
  - name: "blog"
    label: "Blog Posts"
    label_singular: "Blog Post"
    folder: "content/blog"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    preview_path: "blog/{{slug}}"
    summary: "{{title}} - {{author}} ({{date}})"
    sortable_fields: ['date', 'title', 'author', 'category']
    fields:
      - {label: "Title", name: "title", widget: "string", hint: "Blog post title"}
      - {label: "Slug", name: "slug", widget: "string", hint: "URL-friendly version (auto-generated)", pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', "Must be lowercase with hyphens only"]}
      
      # Author & Date
      - {label: "Author", name: "author", widget: "select", options: ["ARP Team", "Dr. Sarah Johnson", "Emily Rodriguez", "Michael Chen", "Guest Contributor"], hint: "Post author"}
      - {label: "Publish Date", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: false}
      
      # Categorization
      - {label: "Category", name: "category", widget: "select", options: ["Getting Started", "Education", "Communication", "Daily Living", "Parenting", "Resources", "Personal Stories", "Health & Wellness", "Advocacy", "Research"]}
      - {label: "Tags", name: "tags", widget: "list", hint: "Keywords for search (e.g., diagnosis, IEP, sensory)", allow_add: true}
      
      # Summary & Images
      - {label: "Excerpt", name: "excerpt", widget: "text", hint: "Short summary for blog list (150-200 characters)"}
      - {label: "Featured Image", name: "image", widget: "image", media_folder: "/public/uploads/blog/images", public_folder: "/uploads/blog/images", hint: "Main image for the post"}
      - {label: "Image Alt Text", name: "imageAlt", widget: "string", hint: "Describe the image for accessibility"}
      - {label: "Read Time", name: "readTime", widget: "string", default: "5 min read", hint: "Estimated reading time (e.g., '8 min read')"}
      
      # Content
      - {label: "Content", name: "body", widget: "markdown", hint: "Main blog post content"}
      
      # SEO (Optional)
      - label: "SEO Settings"
        name: "seo"
        widget: "object"
        collapsed: true
        hint: "Optional: Override default SEO settings"
        fields:
          - {label: "SEO Title", name: "title", widget: "string", required: false, hint: "Custom title for search engines"}
          - {label: "SEO Description", name: "description", widget: "text", required: false, hint: "Custom description for search engines"}
          - {label: "Keywords", name: "keywords", widget: "list", required: false}
      
      # Metadata
      - {label: "Featured Post", name: "featured", widget: "boolean", default: false, hint: "Show on homepage"}
      - {label: "Allow Comments", name: "allowComments", widget: "boolean", default: true}
      - {label: "Related Posts", name: "relatedPosts", widget: "list", required: false, hint: "Slugs of related blog posts"}

  # ============================================
  # COMMUNITY RESOURCES
  # ============================================
  - name: "community"
    label: "Community Resources"
    label_singular: "Community Resource"
    folder: "content/community"
    create: true
    slug: "{{slug}}"
    preview_path: "community/{{slug}}"
    summary: "{{name}} - {{city}}, {{state}}"
    sortable_fields: ['name', 'state', 'city', 'type']
    fields:
      - {label: "Resource Name", name: "name", widget: "string", hint: "Name of the organization or group"}
      - {label: "Slug", name: "slug", widget: "string", hint: "URL-friendly identifier", pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', "Must be lowercase with hyphens only"]}
      
      # Type & Category
      - {label: "Type", name: "type", widget: "select", options: ["Support Group", "Network", "Resource Center", "Online Community", "Event", "Organization", "Advocacy Group"]}
      - {label: "Description", name: "description", widget: "text", hint: "Brief description of the resource (200-300 characters)"}
      
      # Location
      - {label: "State", name: "state", widget: "select", options: ["Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming", "Online/Virtual"]}
      - {label: "City", name: "city", widget: "string"}
      - {label: "Address", name: "address", widget: "text", required: false, hint: "Physical address (optional)"}
      - {label: "Zip Code", name: "zipCode", widget: "string", required: false}
      
      # Contact Information
      - {label: "Contact Email", name: "contact", widget: "string", hint: "Primary contact email"}
      - {label: "Contact Phone", name: "phone", widget: "string", required: false, hint: "Phone number (optional)"}
      - {label: "Website URL", name: "website", widget: "string", hint: "Organization website"}
      - {label: "Facebook Page", name: "facebook", widget: "string", required: false}
      - {label: "Instagram Handle", name: "instagram", widget: "string", required: false}
      
      # Meeting Details
      - {label: "Meeting Schedule", name: "meetingSchedule", widget: "string", hint: "When meetings occur (e.g., 'First Saturday of each month')"}
      - {label: "Meeting Format", name: "meetingFormat", widget: "select", options: ["In-Person", "Virtual", "Hybrid"]}
      - {label: "Meeting Link", name: "meetingLink", widget: "string", required: false, hint: "Zoom/virtual meeting link (if applicable)"}
      
      # Additional Details
      - {label: "Cost", name: "cost", widget: "select", options: ["Free", "Donation-Based", "Paid"], default: "Free"}
      - {label: "Age Groups Served", name: "ageGroups", widget: "select", multiple: true, options: ["Early Childhood (0-5)", "Children (6-12)", "Teens (13-17)", "Adults (18+)", "All Ages"]}
      - {label: "Languages Offered", name: "languages", widget: "list", default: ["English"], hint: "Languages available"}
      - {label: "Accessibility Features", name: "accessibility", widget: "list", required: false, hint: "Wheelchair access, ASL interpreter, etc."}
      
      # Metadata
      - {label: "Logo/Image", name: "logo", widget: "image", required: false, media_folder: "public/uploads/community/logos"}
      - {label: "Featured", name: "featured", widget: "boolean", default: false}
      - {label: "Status", name: "status", widget: "select", options: ["Active", "Inactive", "Seasonal"], default: "Active"}
      - {label: "Last Verified", name: "lastVerified", widget: "datetime", required: false, hint: "When was this information last verified?"}

  # ============================================
  # LIBRARY RESOURCES
  # ============================================
  - name: "library"
    label: "Library Resources"
    label_singular: "Library Resource"
    folder: "content/library"
    create: true
    slug: "{{slug}}"
    preview_path: "library/{{slug}}"
    summary: "{{title}} ({{type}})"
    sortable_fields: ['title', 'category', 'type', 'date']
    fields:
      - {label: "Title", name: "title", widget: "string", hint: "Resource title"}
      - {label: "Slug", name: "slug", widget: "string", hint: "URL-friendly identifier", pattern: ['^[a-z0-9]+(?:-[a-z0-9]+)*$', "Must be lowercase with hyphens only"]}
      
      # Categorization
      - {label: "Category", name: "category", widget: "select", options: ["Education", "Daily Living", "Communication", "Employment", "Early Childhood", "Social Skills", "Health & Wellness", "Legal & Advocacy", "Technology", "Financial", "Transition Planning"]}
      - {label: "Resource Type", name: "type", widget: "select", options: ["PDF Guide", "Article", "Video", "Resource List", "Activity Guide", "Tool/App", "Book", "Research Paper", "Webinar", "Checklist", "Template"]}
      - {label: "Description", name: "description", widget: "text", hint: "Brief description (200-300 characters)"}
      
      # Resource Location
      - {label: "Downloadable", name: "downloadable", widget: "boolean", default: false, hint: "Is this file hosted on our site?"}
      - {label: "File Upload", name: "file", widget: "file", required: false, media_folder: "public/uploads/library/files", hint: "Upload PDF, DOC, or other file (if downloadable)"}
      - {label: "External URL", name: "url", widget: "string", required: false, hint: "Link to external resource (if not downloadable)"}
      
      # Additional Information
      - {label: "Author/Source", name: "author", widget: "string", hint: "Who created this resource?"}
      - {label: "Publication Date", name: "publicationDate", widget: "datetime", required: false, date_format: "YYYY-MM-DD", time_format: false}
      - {label: "Last Updated", name: "lastUpdated", widget: "datetime", required: false, date_format: "YYYY-MM-DD", time_format: false}
      
      # Target Audience
      - {label: "Age Groups", name: "ageGroups", widget: "select", multiple: true, options: ["Early Childhood (0-5)", "Children (6-12)", "Teens (13-17)", "Adults (18+)", "All Ages", "Parents/Caregivers", "Professionals"]}
      - {label: "Language", name: "language", widget: "select", options: ["English", "Spanish", "French", "Mandarin", "Other"], default: "English"}
      - {label: "Reading Level", name: "readingLevel", widget: "select", required: false, options: ["Elementary", "Middle School", "High School", "Adult", "Professional"]}
      
      # Access & Cost
      - {label: "Cost", name: "cost", widget: "select", options: ["Free", "Paid", "Subscription Required"], default: "Free"}
      - {label: "Price", name: "price", widget: "string", required: false, hint: "If paid, what's the cost?"}
      - {label: "Access Requirements", name: "accessRequirements", widget: "text", required: false, hint: "Any requirements to access (e.g., registration, account)"}
      
      # Content Details
      - {label: "Full Description", name: "fullDescription", widget: "markdown", required: false, hint: "Detailed description of the resource"}
      - {label: "Key Topics", name: "tags", widget: "list", hint: "Keywords for search"}
      - {label: "Table of Contents", name: "tableOfContents", widget: "list", required: false, hint: "Main sections or chapters"}
      
      # Metadata
      - {label: "Thumbnail Image", name: "thumbnail", widget: "image", required: false, media_folder: "public/uploads/library/thumbnails"}
      - {label: "Featured", name: "featured", widget: "boolean", default: false}
      - {label: "Status", name: "status", widget: "select", options: ["Published", "Archived", "Coming Soon"], default: "Published"}
      - {label: "Download Count", name: "downloadCount", widget: "number", required: false, value_type: "int", min: 0, hint: "Track popularity"}
      - {label: "Rating", name: "rating", widget: "number", required: false, value_type: "float", min: 0, max: 5, step: 0.1}
